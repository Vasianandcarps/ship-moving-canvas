<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <canvas id="ship" width="800" height="200"></canvas>
    <button onclick="stop()">Stop</button>
    <button onclick="reverse()">&lt;</button>
    <button onclick="start()">&gt;</button>
    <input type="number" id ="speed" value="">
    <button onclick="set()" >Set</button>
    <script>var canvas;
		var context;
		var squarePosition_x = 10;
		var squarePosition_y = 0;
        let timer;
        let speed ;
      let marker;
	 	window.onload = function() {
		   // Определение контекста рисования
		   canvas = document.getElementById("ship");
		   context = canvas.getContext("2d");
		   // Обновляем холст через 0.02 секунды
		drawFrame()
		}
      
		function drawFrame(speed=1) {
          
		   // Очистить холст
		   context.clearRect(0, 0, canvas.width, canvas.height);
		   // Вызываем метод beginPath(), чтобы убедиться,
		   // что мы не рисуем часть уже нарисованного содержимого холста
		   context.beginPath();
		   // Рисуем квадратик размером 10x10 пикселов в текущей позиции
		// Рисуем парус 
        context.beginPath();
    context.fillStyle = "#fc0";
    context.moveTo(squarePosition_x + 20, 70); 
    context.lineTo(squarePosition_x + 60, 20); 
    context.lineTo(squarePosition_x +60, 70); 
    context.fill();
    // Рисуем палубу
    context.beginPath();
    context.fillStyle = "#ccf";
    context.moveTo(squarePosition_x + 0, 70); 
    context.lineTo(squarePosition_x +30, 100); 
    context.lineTo(squarePosition_x +70, 100); 
    context.lineTo(squarePosition_x +100, 70); 
        
    context.fill();
    
    // Рисуем мачту 
    context.beginPath();
    context.fillStyle = "#a60";
    context.fillRect(squarePosition_x + 60, 5, 5, 65);
    // Рисуем флаг 
    context.beginPath();
    context.fillStyle = "#e49";
    context.fillRect(squarePosition_x + 40, 5, 20, 10);
    // Пишем название
    context.fillStyle = '#00f';
    context.font = 'italic 20px sans-serif';
    context.textBaseline = 'top';
    context.fillText('SHIP', squarePosition_x + 25, 75);
    
		   // Перемещаем квадратик вниз на 1 пиксел (где он будет
		   // прорисован в следующем кадре)
           if (marker==1){
 squarePosition_x += speed;
           }else if(marker==0){
            squarePosition_x -= speed;
           }
		        
		   // Рисуем следующий кадр через 20 миллисекунд
		  // setTimeout("drawFrame()", 20);
          if( squarePosition_x==700 || squarePosition_x==10){
              stop();
          }
	   	//console.log(squarePosition_x )
          
    }
            
      function start() {
          
          stop();
          drawFrame() 
          timer=setInterval(drawFrame.bind(this.speed), speed);
marker=1;
 
      }
      function stop() {
          clearInterval(timer)
          
      }
      function reverse() {
        stop();
        drawFrame()
        timer=setInterval(drawFrame.bind(this.speed), speed);
        marker=0;
      }

      function set() {
    speed= +document.getElementById("speed").value
    console.log(speed)
    }
  
      </script>
</body>
</html>
